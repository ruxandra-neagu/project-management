<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Projects Chart</title>
<!-- Include Chart.js from CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Include Bootstrap CSS for styling -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<style>
  /* Add custom styles */
  #chart-container {
    width: 50%;  /* Adjust the width as needed */
    margin: auto;  /* Center the container */
  }
</style>
</head>
<body>
<!-- Navigation Button -->
<div class="container my-3 text-center">
  <a class="btn btn-primary" th:href="@{/projects}">Projects</a>
</div>

<!-- Chart Container -->
<div id="chart-container">
  <!-- Canvas element for the chart -->
  <canvas id="myChart"></canvas>
</div>

<!-- Include JavaScript code -->
<script th:inline="javascript">
  /*<![CDATA[*/
  // Variables passed from the controller
  // Variables passed from the controller
  var labels = /*[[${labels}]]*/ [];
  var values = /*[[${values}]]*/ [];

  // Define colors
  const backgroundColors = [
    'rgba(75, 192, 192, 0.5)',   // Green
    'rgba(54, 162, 235, 0.5)',   // Blue
    'rgba(153, 102, 255, 0.5)',  // Purple
    'rgba(201, 203, 207, 0.5)',  // Grey
    // Add more colors if needed
  ];

  // Prepare the data for the chart
  const data = {
    labels: labels,
    datasets: [{
        data: values,
        backgroundColor: backgroundColors,
    }]
  };

  // Chart configuration
  const config = {
    type: 'pie',
    data: data,
    options: {
      responsive: true,
      maintainAspectRatio: false, // Allows custom sizing
      plugins: {
        legend: {
          position: 'top',
        },
        title: {
          display: true,
          text: 'Projects Chart'
        }
      }
    },
  };

  // Initialize the chart
  window.addEventListener('load', function(){
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, config);
  });
  /*]]>*/
</script>

<!-- Include Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>